COMPOSE_PROJECT_NAME=pmoves-dox

# =============================================================================
# Core Configuration
# =============================================================================

# Backend configuration
OPEN_PDF_ENABLED=true
PORT=8000
FRONTEND_ORIGIN=http://localhost:3000

# Frontend configuration
NEXT_PUBLIC_API_BASE=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:4222

# =============================================================================
# LLM & Model Configuration
# =============================================================================

# Internal Ollama service URL (service DNS on compose network)
OLLAMA_BASE_URL=http://ollama:11434

# ------------------------------------------------------------------
# KEY INHERITANCE FROM PARENT PMOVES.AI REPO
# ------------------------------------------------------------------
# The following keys are automatically inherited from ../../pmoves/env.shared
# via docker-compose.yml env_file mount. Do NOT redefine them here unless
# you need to override the parent values for DoX-specific purposes.
#
# Inherited Keys:
#   - HF_API_KEY, HUGGINGFACE_HUB_TOKEN (Hugging Face models)
#   - OPENROUTER_API_KEY (OpenRouter LLM provider)
#   - POSTMAN_API_KEY (Postman MCP agent)
#   - SUPABASE_URL, SUPABASE_*_KEY (Database auth)
#   - PGRST_JWT_SECRET (PostgREST JWT)
#   - GEMINI_API_KEY (Google AI for LangExtract)
#   - OLLAMA_BASE_URL (Local LLM)
#   - And many more - see ../../pmoves/env.shared
#
# To override a key locally, create a .env.local file with your custom value.
# ------------------------------------------------------------------

# ------------------------------------------------------------------
# PMOVES.AI Ecosystem Integrations
# ------------------------------------------------------------------

# Data Tier (Databases & Storage)
# QDRANT_URL=http://qdrant:6333
# QDRANT_COLLECTION=pmoves_chunks
# NEO4J_URL=neo4j://neo4j:7687
# NEO4J_USER=neo4j
# NEO4J_PASSWORD=password
# MEILI_URL=http://meilisearch:7700
# MEILI_API_KEY=masterKey
# MINIO_ENDPOINT=minio:9000
# MINIO_ACCESS_KEY=minioadmin
# MINIO_SECRET_KEY=minioadmin

# Bus Tier (Event Bus)
# NATS_URL=nats://nats:4222
# AGENTZERO_JETSTREAM=true

# Service URLs (Agent & Knowledge Services)
# HIRAG_URL=http://hi-rag-gateway-v2:8086
# SUPASERCH_URL=http://supaserch:8099
# DEEPRESEARCH_MODE=openrouter

# Agent Zero Configuration (Docking Pattern)
# MCP server is ENABLED by default so UI instance can connect to API MCP instance
# Set AGENT_ZERO_MCP_ENABLED=false for standalone Web UI only mode
# AGENT_ZERO_MCP_ENABLED=true
# AGENT_ZERO_MCP_TOKEN=pmoves-dox-mcp-token
# MCP endpoint: http://pmoves-agent-zero:50051/mcp/t-{token}/sse
# Web UI: http://localhost:50051 (available alongside MCP server)

# Supabase (PostgREST) Config
# Generate with tools/gen_jwt.py if self-hosting
# Note: PGRST_JWT_SECRET is inherited from env.shared
# PGRST_JWT_SECRET=your-jwt-secret
# SUPABASE_SERVICE_KEY=your-service-key
# SUPABASE_ANON_KEY=your-anon-key
# SUPA_REST_URL=http://postgrest:3000

# ------------------------------------------------------------------
# Frontend Config
# ------------------------------------------------------------------
FRONTEND_PORT=3001
BACKEND_PORT=8484
NEXT_PUBLIC_API_BASE=http://localhost:8484

# ------------------------------------------------------------------
# Optional ML & External config
# ------------------------------------------------------------------
# DOCLING_VLM_REPO=ibm-granite/granite-docling-258m-demo
# Note: HF_API_KEY is inherited from env.shared
# HF_API_KEY=hf_xxx
# HUGGINGFACE_HUB_TOKEN=${HF_API_KEY}
# Note: OPENROUTER_API_KEY is inherited from env.shared
# OPENROUTER_API_KEY=sk-or-xxx

# LangExtract configuration
LANGEXTRACT_MODEL=gemini-2.5-flash
# LANGEXTRACT_API_KEY=your-api-key-here
# LANGEXTRACT_PROVIDER=ollama

# TensorZero LLM Gateway (docked mode)
TENSORZERO_URL=http://tensorzero-gateway:3000
# TENSORZERO_API_KEY=

# =============================================================================
# Database Configuration
# =============================================================================

# Database backend: sqlite | supabase
DB_BACKEND=sqlite

# PostgreSQL credentials (for Supabase/docked mode)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme
POSTGRES_DB=pmoves_dox

# Supabase configuration (required when DB_BACKEND=supabase)
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=
SUPABASE_SCHEMA=public
SUPABASE_DUAL_WRITE=false

# =============================================================================
# Knowledge Graph (Optional)
# =============================================================================

# Neo4j configuration
NEO4J_USER=neo4j
NEO4J_PASSWORD=changeme

# =============================================================================
# Analytics (Docked Mode)
# =============================================================================

# ClickHouse configuration
CLICKHOUSE_HOST=clickhouse
CLICKHOUSE_USER=default
# CLICKHOUSE_PASSWORD=

# =============================================================================
# Message Bus (Docked Mode)
# =============================================================================

# NATS configuration
NATS_URL=nats://nats:4222

# =============================================================================
# External API Keys
# =============================================================================

# Postman API sync
# POSTMAN_API_KEY=

# OpenAI API (if using OpenAI models)
# OPENAI_API_KEY=

# Anthropic API (if using Claude models)
# ANTHROPIC_API_KEY=

# =============================================================================
# Feature Flags
# =============================================================================

# HRM (Reasoning sidecar)
HRM_ENABLED=false
HRM_MMAX=6
HRM_MMIN=2

# Auto-migration on startup
AUTO_MIGRATE=false

# =============================================================================
# Docked Mode Configuration
# =============================================================================

# Set to true when running as part of PMOVES.AI
DOCKED_MODE=false

# Port offsets for docked mode (avoid conflicts with parent)
# DOX_BACKEND_PORT=8484
# DOX_FRONTEND_PORT=3001
# DOX_NATS_PORT=4223
# DOX_NEO4J_BOLT_PORT=17687

# Parent network name
# PMOVES_AI_NETWORK=pmoves-ai-net
