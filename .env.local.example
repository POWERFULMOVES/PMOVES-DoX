# PMOVES-DoX Local Environment Configuration
# This file inherits secrets from parent PMOVES.AI via ../pmoves/env.shared
# Values here can override parent settings for DoX-specific needs

# ------------------------------------------------------------------
# Deployment Mode
# ------------------------------------------------------------------
# PMOVES_MODE: standalone (default) or docked
# - standalone: Run with all local services (default for development)
# - docked: Run as submodule within PMOVES.AI, sharing parent services
PMOVES_MODE=${PMOVES_MODE:-standalone}

# ------------------------------------------------------------------
# Project Identity
# ------------------------------------------------------------------
COMPOSE_PROJECT_NAME=pmoves-dox

# ------------------------------------------------------------------
# Key Inheritance from Parent PMOVES.AI (../pmoves/env.shared)
# ------------------------------------------------------------------
# docker-compose.yml loads env.shared first, then this file
# To override a parent value, uncomment and set it here

# Supabase / PostgREST - Self-Hosted JWT Configuration
# Generate production keys using the PMOVES-supabase submodule:
#   cd external/PMOVES-supabase/docker/utils && ./generate-keys.sh
# This generates JWT_SECRET, ANON_KEY, and SERVICE_ROLE_KEY with proper signatures
SUPABASE_JWT_SECRET=${SUPABASE_JWT_SECRET:-your-super-secret-jwt-token-with-at-least-32-characters}

# Google AI (inherited from env.shared as GOOGLE_API_KEY)
# GEMINI_API_KEY=AIzaSy...

# OpenRouter (inherited from env.shared as OPENROUTER_API_KEY)
# OPENROUTER_API_KEY=sk-or-...

# Hugging Face (inherited from env.shared as HF_API_KEY / HUGGINGFACE_HUB_TOKEN)
# HF_API_KEY=hf_...
# HUGGINGFACE_HUB_TOKEN=${HF_API_KEY}

# Postman (inherited from env.shared as POSTMAN_API_KEY)
# POSTMAN_API_KEY=...

# ------------------------------------------------------------------
# DoX-Specific Mappings (Parent Keys â†’ DoX Expected Names)
# ------------------------------------------------------------------
# Map parent env.shared keys to names expected by docker-compose.yml

# Neo4j - Local (DoX container) - defaults to parent NEO4J_PASSWORD
NEO4J_LOCAL_PASSWORD=pmovesNeo4j!Local2025

# Neo4j - Parent (PMOVES.AI shared) - defaults to parent NEO4J_PASSWORD
NEO4J_PARENT_PASSWORD=pmovesNeo4j!Local2025

# Postgres (inherited from env.shared)
# POSTGRES_PASSWORD=postgres

# Supabase / PostgREST (production keys - generated by generate-keys.sh)
# These JWT tokens must be signed with the same SUPABASE_JWT_SECRET above
# Generate using: cd external/PMOVES-supabase/docker/utils && ./generate-keys.sh
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY:-eyJ...generate-with-script}
SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY:-eyJ...generate-with-script}

# ------------------------------------------------------------------
# DoX Service Configuration
# ------------------------------------------------------------------
# Database backend: sqlite (default, auto-creates tables) or supabase
DB_BACKEND=supabase
# Enable dual-write mode to write to BOTH SQLite and Supabase
SUPABASE_DUAL_WRITE=false
OPEN_PDF_ENABLED=true
BACKEND_PORT=8484
FRONTEND_PORT=3001

# Internal Ollama service URL (DoX container - uses parent via network)
OLLAMA_BASE_URL=http://ollama:11434

# ------------------------------------------------------------------
# Optional ML & External Features
# ------------------------------------------------------------------
# DOCLING_VLM_REPO=ibm-granite/granite-docling-258m-demo

# ------------------------------------------------------------------
# Agent Zero Docking Pattern
# ------------------------------------------------------------------
# Standalone mode: AGENT_ZERO_MCP_ENABLED=false (Web UI on port 50051)
# Docked mode: AGENT_ZERO_MCP_ENABLED=true (MCP API for PMOVES.AI)
# AGENT_ZERO_MCP_TOKEN is required when docked - parent uses it to authenticate

# MCP Server Mode (auto-enabled in docked mode via docker-compose.docked.yml)
AGENT_ZERO_MCP_ENABLED=false

# MCP Server Token (set via GitHub Secret in production)
# Generate with: openssl rand -hex 32
AGENT_ZERO_MCP_TOKEN=${AGENT_ZERO_MCP_TOKEN:-}

# ------------------------------------------------------------------
# HRM (Halting Reasoning Module) - Experimental
# ------------------------------------------------------------------
HRM_ENABLED=false
HRM_MMAX=6
HRM_MMIN=2

# ------------------------------------------------------------------
# Frontend Environment
# ------------------------------------------------------------------
NEXT_PUBLIC_API_BASE=http://localhost:8484
NEXT_PUBLIC_NATS_WS_URL=ws://localhost:9223
# Postgres password (generated by generate-keys.sh or set manually)
POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-postgres}
