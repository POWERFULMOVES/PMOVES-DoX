# Frontend origin allowed for CORS (comma-separated if multiple)
FRONTEND_ORIGIN=http://localhost:8484,http://127.0.0.1:8484,http://frontend:3001

# Backend port (changed from 8000 to 8484 to avoid common port conflicts)
PORT=8484

# ------------------------------------------------------------------
# KEY INHERITANCE FROM PARENT PMOVES.AI REPO
# ------------------------------------------------------------------
# The following keys are automatically inherited from ../../pmoves/env.shared
# via docker-compose.yml env_file mount. Do NOT redefine them here unless
# you need to override the parent values for DoX-specific purposes.
#
# Inherited Keys:
#   - HF_API_KEY, HUGGINGFACE_HUB_TOKEN (Hugging Face models)
#   - OPENROUTER_API_KEY (OpenRouter LLM provider)
#   - POSTMAN_API_KEY (Postman MCP agent)
#   - SUPABASE_URL, SUPABASE_*_KEY (Database auth)
#   - PGRST_JWT_SECRET (PostgREST JWT)
#   - GEMINI_API_KEY (Google AI for LangExtract)
#   - OLLAMA_BASE_URL (Local LLM)
#   - And many more - see ../../pmoves/env.shared
#
# To override a key locally, create a .env.local file with your custom value.
# ------------------------------------------------------------------

# Hugging Face token (choose one; HUGGINGFACE_HUB_TOKEN is preferred)
# Note: This is now inherited from ../../pmoves/env.shared
HUGGINGFACE_HUB_TOKEN=
# or use this name if you prefer; the app will map it automatically
# Note: This is now inherited from ../../pmoves/env.shared
HF_API_KEY=

# Optional: enable VLM picture description (Granite Docling)
# Set to an HF repo id:
# - ibm-granite/granite-docling-258M  (recommended)
# - ibm-granite/granite-docling-258m-demo (demo variant)
DOCLING_VLM_REPO=

# Optional: directory for pre-downloaded Docling artifacts/models
# DOCLING_ARTIFACTS_PATH=/app/models

# LangExtract (Google) configuration
# Choose a model id supported by LangExtract (e.g., gemini-2.5-flash)
LANGEXTRACT_MODEL=gemini-2.5-flash
# API key for cloud models (Gemini). If set, backend passes it to LangExtract.
# Note: GEMINI_API_KEY is inherited from ../../pmoves/env.shared
LANGEXTRACT_API_KEY=

# Ollama local LLMs (for LangExtract with local models)
# e.g., set LANGEXTRACT_PROVIDER=ollama and LANGEXTRACT_MODEL=ollama:gemma3
LANGEXTRACT_PROVIDER=
# Note: OLLAMA_BASE_URL is inherited, but DoX uses internal service URL
OLLAMA_BASE_URL=http://ollama:11434

# Watch folder configuration
WATCH_ENABLED=true
# Container default path (/app/watch). On bare metal: set to an absolute path or leave default 'watch' relative to backend working dir.
WATCH_DIR=/app/watch
WATCH_DEBOUNCE_MS=1000
WATCH_MIN_BYTES=1

# datavzrd spells toggle (apply text wrapping, etc.)
DATAVZRD_SPELLS=true

# HRM / Reasoning sidecar (optional)
# Toggle HRM integration and defaults for experiments and demo wiring in /ask
HRM_ENABLED=false
HRM_MMAX=6
HRM_MMIN=2
HRM_THRESHOLD=0.5
# Optional: log HRM metrics to a file (JSONL)
HRM_METRICS_LOG=artifacts/metrics/hrm.log

# Auto-run Alembic migrations on startup (guarded)
# Set to true to run `alembic upgrade head` when the backend starts
AUTO_MIGRATE=false

# GPU / accelerator preferences
# Preferred device for sentence-transformer embeddings (e.g., cuda, cuda:0, cpu)
SEARCH_DEVICE=
# Docling pipeline accelerator (auto|cuda|cpu) and optional thread cap
DOCLING_DEVICE=auto
DOCLING_NUM_THREADS=

# Financial statement analysis (Docling tables)
PDF_FINANCIAL_ANALYSIS=true

# Serving original PDFs (optional)
# If true, enables GET /open/pdf?artifact_id=... to serve the uploaded PDF directly.
OPEN_PDF_ENABLED=false

# XML log XPath mapping (optional)
# Provide either inline JSON/YAML in XML_XPATH_MAP or a file path in XML_XPATH_MAP_FILE
# Example mapping:
# XML_XPATH_MAP={"entry":"//entry | //log","fields":{"ts":"./ts | ./timestamp","level":"./level | ./severity","code":"./code | ./error","component":"./component | ./service","message":"./message | ./msg"}}
# XML_XPATH_MAP_FILE=/app/config/xpath_map.yaml
# Database backend selection: sqlite | supabase
DB_BACKEND=sqlite
SUPABASE_DUAL_WRITE=false
# Note: SUPABASE keys are inherited from ../../pmoves/env.shared
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=
SUPABASE_SCHEMA=public
SUPABASE_TIMEOUT=10

# =============================================================================
# Docked Mode Configuration (PMOVES.AI Integration)
# =============================================================================

# Set to true when running as part of PMOVES.AI infrastructure
DOCKED_MODE=false

# Message bus (NATS)
NATS_URL=nats://nats:4222

# TensorZero LLM Gateway
TENSORZERO_URL=http://tensorzero-gateway:3030
# TENSORZERO_API_KEY=

# Knowledge Graph (Neo4j)
NEO4J_USER=neo4j
# NEO4J_PASSWORD=changeme

# Analytics (ClickHouse)
CLICKHOUSE_HOST=clickhouse
CLICKHOUSE_USER=default
# CLICKHOUSE_PASSWORD=

# External API Keys
# POSTMAN_API_KEY=
# OPENAI_API_KEY=
# ANTHROPIC_API_KEY=
